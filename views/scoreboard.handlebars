<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>{{title}}</title>
	<script data-main="/static/js/app" src="/static/js/lib/require.js"></script>
	<link rel='stylesheet' href='/static/css/style.css' />
	<link rel='stylesheet' href='/static/css/boinkikurenshuu.css'/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

	<script>

		requirejs.config({
			"baseUrl": "/static/js/lib",
			"paths": {
				"app": "../app",
				"jquery": "./jquery-2.2.4.min",
				"handlebars": "//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.amd.min",
				"bootstrap": "./bootstrap.bundle.min"
			}
		});

		define("event_types", [], function() {
			return {{{constants}}};
		});
	</script>

</head>

<body class="scoreboard">
	{{{body}}}
</body>


<script>
	require(['jquery', 'event_types'], function (jQ, Events) {
		let content = jQ('#leaderboardContent', opener.document);
		let socket = opener.getSocket();
		let update = function () {
			jQ('body').empty().append(content[0].outerHTML);
		};

		socket.on(Events.RENDER_TEMPLATE, update);
		socket.on(Events.QUESTION_FAILED, update);
		socket.on(Events.QUESTION_FINISHED, update);

		update();
	});
</script>

</html>
